\doxysection{llimits.\+h}
\hypertarget{llimits_8h_source}{}\label{llimits_8h_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{**\ \$Id:\ llimits.h\ \$}}
\DoxyCodeLine{00003\ \textcolor{comment}{**\ Limits,\ basic\ types,\ and\ some\ other\ 'installation-\/dependent'\ definitions}}
\DoxyCodeLine{00004\ \textcolor{comment}{**\ See\ Copyright\ Notice\ in\ lua.h}}
\DoxyCodeLine{00005\ \textcolor{comment}{*/}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#ifndef\ llimits\_h}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#define\ llimits\_h}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <limits.h>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}lua.h"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00017\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C++"{}}}
\DoxyCodeLine{00018\ \{}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00020\ \}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <stdatomic.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{comment}{/*}}
\DoxyCodeLine{00027\ \textcolor{comment}{**\ 'lu\_mem'\ and\ 'l\_mem'\ are\ unsigned/signed\ integers\ big\ enough\ to\ count}}
\DoxyCodeLine{00028\ \textcolor{comment}{**\ the\ total\ memory\ used\ by\ Lua\ (in\ bytes).\ Usually,\ 'size\_t'\ and}}
\DoxyCodeLine{00029\ \textcolor{comment}{**\ 'ptrdiff\_t'\ should\ work,\ but\ we\ use\ 'long'\ for\ 16-\/bit\ machines.}}
\DoxyCodeLine{00030\ \textcolor{comment}{*/}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#if\ defined(LUAI\_MEM)\ \ \ \ \ \ \ }\textcolor{comment}{/*\ \{\ external\ definitions?\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00032\ \textcolor{keyword}{typedef}\ LUAI\_UMEM\ lu\_mem;}
\DoxyCodeLine{00033\ \textcolor{keyword}{typedef}\ LUAI\_MEM\ l\_mem;}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#elif\ LUAI\_IS32INT\ \ }\textcolor{comment}{/*\ \}\{\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00035\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{size\_t}\ lu\_mem;}
\DoxyCodeLine{00036\ \textcolor{keyword}{typedef}\ ptrdiff\_t\ l\_mem;}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{/*\ 16-\/bit\ ints\ */}\textcolor{preprocessor}{\ \ \ \ }\textcolor{comment}{/*\ \}\{\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00038\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ lu\_mem;}
\DoxyCodeLine{00039\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{long}\ l\_mem;}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#endif\ \ \ \ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{/*\ \}\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#define\ l\_atomic\_add(a,\ n)\ atomic\_fetch\_add(a,\ n)}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#define\ l\_atomic\_sub(a,\ n)\ atomic\_fetch\_sub(a,\ n)}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ l\_atomic\_get(a)\ atomic\_load(a)}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#define\ l\_atomic\_load(a)\ atomic\_load(a)}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#define\ l\_atomic\_set(a,\ n)\ atomic\_store(a,\ n)}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#define\ l\_atomic\_store(a,\ n)\ atomic\_store(a,\ n)}}
\DoxyCodeLine{00048\ \textcolor{keyword}{typedef}\ \_Atomic\ l\_mem\ l\_atomic\_mem;}
\DoxyCodeLine{00049\ \textcolor{keyword}{typedef}\ \_Atomic\ \textcolor{keywordtype}{int}\ l\_atomic;}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{comment}{/*\ chars\ used\ as\ small\ naturals\ (so\ that\ 'char'\ is\ reserved\ for\ characters)\ */}}
\DoxyCodeLine{00053\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ lu\_byte;}
\DoxyCodeLine{00054\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{char}\ ls\_byte;}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \textcolor{comment}{/*\ Type\ for\ thread\ status/error\ codes\ */}}
\DoxyCodeLine{00058\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{int}\ TStatus;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{comment}{/*\ The\ C\ API\ still\ uses\ 'int'\ for\ status/error\ codes\ */}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#define\ APIstatus(st)\ \ \ cast\_int(st)}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{comment}{/*\ maximum\ value\ for\ size\_t\ */}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#define\ MAX\_SIZET\ \ \ ((size\_t)(\string~(size\_t)0))}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{comment}{/*\ maximum\ size\ visible\ for\ Lua\ (must\ be\ representable\ in\ a\ lua\_Integer)\ */}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#define\ MAX\_SIZE\ \ \ \ (sizeof(size\_t)\ <\ sizeof(lua\_Integer)\ ?\ MAX\_SIZET\ \(\backslash\)}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ (size\_t)(LUA\_MAXINTEGER))}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#define\ MAX\_LUMEM\ \ \ ((lu\_mem)(\string~(lu\_mem)0))}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#define\ MAX\_LMEM\ \ \ \ ((l\_mem)(MAX\_LUMEM\ >>\ 1))}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#define\ MAX\_INT\ \ \ \ \ INT\_MAX\ \ }\textcolor{comment}{/*\ maximum\ value\ of\ an\ int\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{comment}{/*}}
\DoxyCodeLine{00080\ \textcolor{comment}{**\ floor\ of\ the\ log2\ of\ the\ maximum\ signed\ value\ for\ integral\ type\ 't'.}}
\DoxyCodeLine{00081\ \textcolor{comment}{**\ (That\ is,\ maximum\ 'n'\ such\ that\ '2\string^n'\ fits\ in\ the\ given\ signed\ type.)}}
\DoxyCodeLine{00082\ \textcolor{comment}{*/}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\#define\ log2maxs(t)\ (sizeof(t)\ *\ 8\ -\/\ 2)}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{comment}{/*}}
\DoxyCodeLine{00087\ \textcolor{comment}{**\ test\ whether\ an\ unsigned\ value\ is\ a\ power\ of\ 2\ (or\ zero)}}
\DoxyCodeLine{00088\ \textcolor{comment}{*/}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#define\ ispow2(x)\ \ \ (((x)\ \&\ ((x)\ -\/\ 1))\ ==\ 0)}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \textcolor{comment}{/*\ number\ of\ chars\ of\ a\ literal\ string\ without\ the\ ending\ \(\backslash\)0\ */}}
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\#define\ LL(x)\ \ \ (sizeof(x)/sizeof(char)\ -\/\ 1)}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{comment}{/*}}
\DoxyCodeLine{00097\ \textcolor{comment}{**\ conversion\ of\ pointer\ to\ unsigned\ integer:\ this\ is\ for\ hashing\ only;}}
\DoxyCodeLine{00098\ \textcolor{comment}{**\ there\ is\ no\ problem\ if\ the\ integer\ cannot\ hold\ the\ whole\ pointer}}
\DoxyCodeLine{00099\ \textcolor{comment}{**\ value.\ (In\ strict\ ISO\ C\ this\ may\ cause\ undefined\ behavior,\ but\ no}}
\DoxyCodeLine{00100\ \textcolor{comment}{**\ actual\ machine\ seems\ to\ bother.)}}
\DoxyCodeLine{00101\ \textcolor{comment}{*/}}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\#if\ !defined(LUA\_USE\_C89)\ \&\&\ defined(\_\_STDC\_VERSION\_\_)\ \&\&\ \(\backslash\)}}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\ \ \ \ \_\_STDC\_VERSION\_\_\ >=\ 199901L}}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\#if\ defined(UINTPTR\_MAX)\ \ }\textcolor{comment}{/*\ even\ in\ C99\ this\ type\ is\ optional\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\#define\ L\_P2I\ \ \ uintptr\_t}}
\DoxyCodeLine{00107\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{/*\ no\ 'intptr'?\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00108\ \textcolor{preprocessor}{\#define\ L\_P2I\ \ \ uintmax\_t\ \ }\textcolor{comment}{/*\ use\ the\ largest\ available\ integer\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00109\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00110\ \textcolor{preprocessor}{\#else\ \ }\textcolor{comment}{/*\ C89\ option\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00111\ \textcolor{preprocessor}{\#define\ L\_P2I\ \ \ size\_t}}
\DoxyCodeLine{00112\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \textcolor{preprocessor}{\#define\ point2uint(p)\ \ \ ((unsigned\ int)((L\_P2I)(p)\ \&\ UINT\_MAX))}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \textcolor{comment}{/*\ types\ of\ 'usual\ argument\ conversions'\ for\ lua\_Number\ and\ lua\_Integer\ */}}
\DoxyCodeLine{00119\ \textcolor{keyword}{typedef}\ LUAI\_UACNUMBER\ l\_uacNumber;}
\DoxyCodeLine{00120\ \textcolor{keyword}{typedef}\ LUAI\_UACINT\ l\_uacInt;}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{comment}{/*}}
\DoxyCodeLine{00124\ \textcolor{comment}{**\ Internal\ assertions\ for\ in-\/house\ debugging}}
\DoxyCodeLine{00125\ \textcolor{comment}{*/}}
\DoxyCodeLine{00126\ \textcolor{preprocessor}{\#if\ defined\ LUAI\_ASSERT}}
\DoxyCodeLine{00127\ \textcolor{preprocessor}{\#undef\ NDEBUG}}
\DoxyCodeLine{00128\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{00129\ \textcolor{preprocessor}{\#define\ lua\_assert(c)\ \ \ \ \ \ \ \ \ \ \ assert(c)}}
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#define\ assert\_code(c)\ \ \ \ \ \ c}}
\DoxyCodeLine{00131\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \textcolor{preprocessor}{\#if\ defined(lua\_assert)}}
\DoxyCodeLine{00134\ \textcolor{preprocessor}{\#define\ check\_exp(c,e)\ \ \ \ \ \ (lua\_assert(c),\ (e))}}
\DoxyCodeLine{00135\ \textcolor{comment}{/*\ to\ avoid\ problems\ with\ conditions\ too\ long\ */}}
\DoxyCodeLine{00136\ \textcolor{preprocessor}{\#define\ lua\_longassert(c)\ \ \ ((c)\ ?\ (void)0\ :\ lua\_assert(0))}}
\DoxyCodeLine{00137\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00138\ \textcolor{preprocessor}{\#define\ lua\_assert(c)\ \ \ \ \ \ \ ((void)0)}}
\DoxyCodeLine{00139\ \textcolor{preprocessor}{\#define\ assert\_code(c)\ \ \ \ \ \ ((void)0)}}
\DoxyCodeLine{00140\ \textcolor{preprocessor}{\#define\ check\_exp(c,e)\ \ \ \ \ \ (e)}}
\DoxyCodeLine{00141\ \textcolor{preprocessor}{\#define\ lua\_longassert(c)\ \ \ ((void)0)}}
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#if\ !defined(luai\_apicheck)}}
\DoxyCodeLine{00146\ \textcolor{preprocessor}{\#define\ luai\_apicheck(l,e)\ \ ((void)l,\ lua\_assert(e))}}
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \textcolor{preprocessor}{\#define\ api\_check(l,e,msg)\ \ luai\_apicheck(l,(e)\ \&\&\ msg)}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \textcolor{comment}{/*\ macro\ to\ avoid\ warnings\ about\ unused\ variables\ */}}
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\#if\ !defined(UNUSED)}}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#define\ UNUSED(x)\ \ \ ((void)(x))}}
\DoxyCodeLine{00155\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \textcolor{comment}{/*\ type\ casts\ (a\ macro\ highlights\ casts\ in\ the\ code)\ */}}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\#define\ cast(t,\ exp)\ \ \ \ ((t)(exp))}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\#define\ cast\_void(i)\ \ \ \ cast(void,\ (i))}}
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#define\ cast\_voidp(i)\ \ \ cast(void\ *,\ (i))}}
\DoxyCodeLine{00163\ \textcolor{preprocessor}{\#define\ cast\_num(i)\ cast(lua\_Number,\ (i))}}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\#define\ cast\_int(i)\ cast(int,\ (i))}}
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\#define\ cast\_short(i)\ \ \ cast(short,\ (i))}}
\DoxyCodeLine{00166\ \textcolor{preprocessor}{\#define\ cast\_uint(i)\ \ \ \ cast(unsigned\ int,\ (i))}}
\DoxyCodeLine{00167\ \textcolor{preprocessor}{\#define\ cast\_byte(i)\ \ \ \ cast(lu\_byte,\ (i))}}
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#define\ cast\_uchar(i)\ \ \ cast(unsigned\ char,\ (i))}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\#define\ cast\_char(i)\ \ \ \ cast(char,\ (i))}}
\DoxyCodeLine{00170\ \textcolor{preprocessor}{\#define\ cast\_charp(i)\ \ \ cast(char\ *,\ (i))}}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\#define\ cast\_sizet(i)\ \ \ cast(size\_t,\ (i))}}
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\#define\ cast\_Integer(i)\ cast(lua\_Integer,\ (i))}}
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\#define\ cast\_Inst(i)\ \ \ \ cast(Instruction,\ (i))}}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \textcolor{comment}{/*\ cast\ a\ signed\ lua\_Integer\ to\ lua\_Unsigned\ */}}
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\#if\ !defined(l\_castS2U)}}
\DoxyCodeLine{00178\ \textcolor{preprocessor}{\#define\ l\_castS2U(i)\ \ \ \ ((lua\_Unsigned)(i))}}
\DoxyCodeLine{00179\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \textcolor{comment}{/*}}
\DoxyCodeLine{00182\ \textcolor{comment}{**\ cast\ a\ lua\_Unsigned\ to\ a\ signed\ lua\_Integer;\ this\ cast\ is}}
\DoxyCodeLine{00183\ \textcolor{comment}{**\ not\ strict\ ISO\ C,\ but\ two-\/complement\ architectures\ should}}
\DoxyCodeLine{00184\ \textcolor{comment}{**\ work\ fine.}}
\DoxyCodeLine{00185\ \textcolor{comment}{*/}}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\#if\ !defined(l\_castU2S)}}
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\#define\ l\_castU2S(i)\ \ \ \ ((lua\_Integer)(i))}}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \textcolor{comment}{/*}}
\DoxyCodeLine{00191\ \textcolor{comment}{**\ cast\ a\ size\_t\ to\ lua\_Integer:\ These\ casts\ are\ always\ valid\ for}}
\DoxyCodeLine{00192\ \textcolor{comment}{**\ sizes\ of\ Lua\ objects\ (see\ MAX\_SIZE)}}
\DoxyCodeLine{00193\ \textcolor{comment}{*/}}
\DoxyCodeLine{00194\ \textcolor{preprocessor}{\#define\ cast\_st2S(sz)\ \ \ ((lua\_Integer)(sz))}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \textcolor{comment}{/*\ Cast\ a\ ptrdiff\_t\ to\ size\_t,\ when\ it\ is\ known\ that\ the\ minuend}}
\DoxyCodeLine{00197\ \textcolor{comment}{**\ comes\ from\ the\ subtrahend\ (the\ base)}}
\DoxyCodeLine{00198\ \textcolor{comment}{*/}}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\#define\ ct\_diff2sz(df)\ \ ((size\_t)(df))}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \textcolor{comment}{/*\ ptrdiff\_t\ to\ lua\_Integer\ */}}
\DoxyCodeLine{00202\ \textcolor{preprocessor}{\#define\ ct\_diff2S(df)\ \ \ cast\_st2S(ct\_diff2sz(df))}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \textcolor{comment}{/*}}
\DoxyCodeLine{00205\ \textcolor{comment}{**\ Special\ type\ equivalent\ to\ '(void*)'\ for\ functions\ (to\ suppress\ some}}
\DoxyCodeLine{00206\ \textcolor{comment}{**\ warnings\ when\ converting\ function\ pointers)}}
\DoxyCodeLine{00207\ \textcolor{comment}{*/}}
\DoxyCodeLine{00208\ \textcolor{keyword}{typedef}\ void\ (*voidf)(void);}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \textcolor{comment}{/*}}
\DoxyCodeLine{00211\ \textcolor{comment}{**\ Macro\ to\ convert\ pointer-\/to-\/void*\ to\ pointer-\/to-\/function.\ This\ cast}}
\DoxyCodeLine{00212\ \textcolor{comment}{**\ is\ undefined\ according\ to\ ISO\ C,\ but\ POSIX\ assumes\ that\ it\ works.}}
\DoxyCodeLine{00213\ \textcolor{comment}{**\ (The\ '\_\_extension\_\_'\ in\ gnu\ compilers\ is\ only\ to\ avoid\ warnings.)}}
\DoxyCodeLine{00214\ \textcolor{comment}{*/}}
\DoxyCodeLine{00215\ \textcolor{preprocessor}{\#if\ defined(\_\_GNUC\_\_)}}
\DoxyCodeLine{00216\ \textcolor{preprocessor}{\#define\ cast\_func(p)\ (\_\_extension\_\_\ (voidf)(p))}}
\DoxyCodeLine{00217\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00218\ \textcolor{preprocessor}{\#define\ cast\_func(p)\ ((voidf)(p))}}
\DoxyCodeLine{00219\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \textcolor{comment}{/*}}
\DoxyCodeLine{00224\ \textcolor{comment}{**\ non-\/return\ type}}
\DoxyCodeLine{00225\ \textcolor{comment}{*/}}
\DoxyCodeLine{00226\ \textcolor{preprocessor}{\#if\ !defined(l\_noret)}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \textcolor{preprocessor}{\#if\ defined(\_\_GNUC\_\_)}}
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\#define\ l\_noret\ \ \ \ \ void\ \_\_attribute\_\_((noreturn))}}
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\#elif\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1200}}
\DoxyCodeLine{00231\ \textcolor{preprocessor}{\#define\ l\_noret\ \ \ \ \ void\ \_\_declspec(noreturn)}}
\DoxyCodeLine{00232\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00233\ \textcolor{preprocessor}{\#define\ l\_noret\ \ \ \ \ void}}
\DoxyCodeLine{00234\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \textcolor{comment}{/*}}
\DoxyCodeLine{00240\ \textcolor{comment}{**\ Inline\ functions}}
\DoxyCodeLine{00241\ \textcolor{comment}{*/}}
\DoxyCodeLine{00242\ \textcolor{preprocessor}{\#if\ !defined(LUA\_USE\_C89)}}
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\#define\ l\_inline\ \ \ \ inline}}
\DoxyCodeLine{00244\ \textcolor{preprocessor}{\#elif\ defined(\_\_GNUC\_\_)}}
\DoxyCodeLine{00245\ \textcolor{preprocessor}{\#define\ l\_inline\ \ \ \ \_\_inline\_\_}}
\DoxyCodeLine{00246\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00247\ \textcolor{preprocessor}{\#define\ l\_inline\ \ \ \ }\textcolor{comment}{/*\ empty\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \textcolor{preprocessor}{\#define\ l\_sinline\ \ \ static\ l\_inline}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \textcolor{comment}{/*}}
\DoxyCodeLine{00254\ \textcolor{comment}{**\ An\ unsigned\ with\ (at\ least)\ 8\ bytes}}
\DoxyCodeLine{00255\ \textcolor{comment}{*/}}
\DoxyCodeLine{00256\ \textcolor{preprocessor}{\#if\ LUAI\_IS32INT}}
\DoxyCodeLine{00257\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ l\_uint64;}
\DoxyCodeLine{00258\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ l\_uint32;}
\DoxyCodeLine{00259\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00260\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ l\_uint64;}
\DoxyCodeLine{00261\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ l\_uint32;}
\DoxyCodeLine{00262\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \textcolor{keyword}{typedef}\ l\_uint64\ Instruction;}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \textcolor{comment}{/*}}
\DoxyCodeLine{00269\ \textcolor{comment}{**\ Maximum\ length\ for\ short\ strings,\ that\ is,\ strings\ that\ are}}
\DoxyCodeLine{00270\ \textcolor{comment}{**\ internalized.\ (Cannot\ be\ smaller\ than\ reserved\ words\ or\ tags\ for}}
\DoxyCodeLine{00271\ \textcolor{comment}{**\ metamethods,\ as\ these\ strings\ must\ be\ internalized;}}
\DoxyCodeLine{00272\ \textcolor{comment}{**\ \#("{}function"{})\ =\ 8,\ \#("{}\_\_newindex"{})\ =\ 10.)}}
\DoxyCodeLine{00273\ \textcolor{comment}{*/}}
\DoxyCodeLine{00274\ \textcolor{preprocessor}{\#if\ !defined(LUAI\_MAXSHORTLEN)}}
\DoxyCodeLine{00275\ \textcolor{preprocessor}{\#define\ LUAI\_MAXSHORTLEN\ \ \ \ 40}}
\DoxyCodeLine{00276\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \textcolor{comment}{/*}}
\DoxyCodeLine{00280\ \textcolor{comment}{**\ Initial\ size\ for\ the\ string\ table\ (must\ be\ power\ of\ 2).}}
\DoxyCodeLine{00281\ \textcolor{comment}{**\ The\ Lua\ core\ alone\ registers\ \string~50\ strings\ (reserved\ words\ +}}
\DoxyCodeLine{00282\ \textcolor{comment}{**\ metaevent\ keys\ +\ a\ few\ others).\ Libraries\ would\ typically\ add}}
\DoxyCodeLine{00283\ \textcolor{comment}{**\ a\ few\ dozens\ more.}}
\DoxyCodeLine{00284\ \textcolor{comment}{*/}}
\DoxyCodeLine{00285\ \textcolor{preprocessor}{\#if\ !defined(MINSTRTABSIZE)}}
\DoxyCodeLine{00286\ \textcolor{preprocessor}{\#define\ MINSTRTABSIZE\ \ \ 128}}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \textcolor{comment}{/*}}
\DoxyCodeLine{00291\ \textcolor{comment}{**\ Size\ of\ cache\ for\ strings\ in\ the\ API.\ 'N'\ is\ the\ number\ of}}
\DoxyCodeLine{00292\ \textcolor{comment}{**\ sets\ (better\ be\ a\ prime)\ and\ "{}M"{}\ is\ the\ size\ of\ each\ set\ (M\ ==\ 1}}
\DoxyCodeLine{00293\ \textcolor{comment}{**\ makes\ a\ direct\ cache.)}}
\DoxyCodeLine{00294\ \textcolor{comment}{*/}}
\DoxyCodeLine{00295\ \textcolor{preprocessor}{\#if\ !defined(STRCACHE\_N)}}
\DoxyCodeLine{00296\ \textcolor{preprocessor}{\#define\ STRCACHE\_N\ \ \ \ \ \ 53}}
\DoxyCodeLine{00297\ \textcolor{preprocessor}{\#define\ STRCACHE\_M\ \ \ \ \ \ 2}}
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \textcolor{comment}{/*\ minimum\ size\ for\ string\ buffer\ */}}
\DoxyCodeLine{00302\ \textcolor{preprocessor}{\#if\ !defined(LUA\_MINBUFFER)}}
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\#define\ LUA\_MINBUFFER\ \ \ 32}}
\DoxyCodeLine{00304\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \textcolor{comment}{/*}}
\DoxyCodeLine{00308\ \textcolor{comment}{**\ Maximum\ depth\ for\ nested\ C\ calls,\ syntactical\ nested\ non-\/terminals,}}
\DoxyCodeLine{00309\ \textcolor{comment}{**\ and\ other\ features\ implemented\ through\ recursion\ in\ C.\ (Value\ must}}
\DoxyCodeLine{00310\ \textcolor{comment}{**\ fit\ in\ a\ 16-\/bit\ unsigned\ integer.\ It\ must\ also\ be\ compatible\ with}}
\DoxyCodeLine{00311\ \textcolor{comment}{**\ the\ size\ of\ the\ C\ stack.)}}
\DoxyCodeLine{00312\ \textcolor{comment}{*/}}
\DoxyCodeLine{00313\ \textcolor{preprocessor}{\#if\ !defined(LUAI\_MAXCCALLS)}}
\DoxyCodeLine{00314\ \textcolor{preprocessor}{\#define\ LUAI\_MAXCCALLS\ \ \ \ \ \ 500}}
\DoxyCodeLine{00315\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \textcolor{comment}{/*}}
\DoxyCodeLine{00319\ \textcolor{comment}{**\ macros\ that\ are\ executed\ whenever\ program\ enters\ the\ Lua\ core}}
\DoxyCodeLine{00320\ \textcolor{comment}{**\ ('lua\_lock')\ and\ leaves\ the\ core\ ('lua\_unlock')}}
\DoxyCodeLine{00321\ \textcolor{comment}{*/}}
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#if\ !defined(lua\_lock)}}
\DoxyCodeLine{00323\ \textcolor{preprocessor}{\#define\ lua\_lock(L)\ ((void)\ 0)}}
\DoxyCodeLine{00324\ \textcolor{preprocessor}{\#define\ lua\_unlock(L)\ \ \ ((void)\ 0)}}
\DoxyCodeLine{00325\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \textcolor{comment}{/*}}
\DoxyCodeLine{00328\ \textcolor{comment}{**\ macro\ executed\ during\ Lua\ functions\ at\ points\ where\ the}}
\DoxyCodeLine{00329\ \textcolor{comment}{**\ function\ can\ yield.}}
\DoxyCodeLine{00330\ \textcolor{comment}{*/}}
\DoxyCodeLine{00331\ \textcolor{preprocessor}{\#if\ !defined(luai\_threadyield)}}
\DoxyCodeLine{00332\ \textcolor{preprocessor}{\#define\ luai\_threadyield(L)\ \{lua\_unlock(L);\ lua\_lock(L);\}}}
\DoxyCodeLine{00333\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \textcolor{comment}{/*}}
\DoxyCodeLine{00337\ \textcolor{comment}{**\ these\ macros\ allow\ user-\/specific\ actions\ when\ a\ thread\ is}}
\DoxyCodeLine{00338\ \textcolor{comment}{**\ created/deleted/resumed/yielded.}}
\DoxyCodeLine{00339\ \textcolor{comment}{*/}}
\DoxyCodeLine{00340\ \textcolor{preprocessor}{\#if\ !defined(luai\_userstateopen)}}
\DoxyCodeLine{00341\ \textcolor{preprocessor}{\#define\ luai\_userstateopen(L)\ \ \ \ \ \ \ ((void)L)}}
\DoxyCodeLine{00342\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \textcolor{preprocessor}{\#if\ !defined(luai\_userstateclose)}}
\DoxyCodeLine{00345\ \textcolor{preprocessor}{\#define\ luai\_userstateclose(L)\ \ \ \ \ \ ((void)L)}}
\DoxyCodeLine{00346\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#if\ !defined(luai\_userstatethread)}}
\DoxyCodeLine{00349\ \textcolor{preprocessor}{\#define\ luai\_userstatethread(L,L1)\ \ ((void)L)}}
\DoxyCodeLine{00350\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \textcolor{preprocessor}{\#if\ !defined(luai\_userstatefree)}}
\DoxyCodeLine{00353\ \textcolor{preprocessor}{\#define\ luai\_userstatefree(L,L1)\ \ \ \ ((void)L)}}
\DoxyCodeLine{00354\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \textcolor{preprocessor}{\#if\ !defined(luai\_userstateresume)}}
\DoxyCodeLine{00357\ \textcolor{preprocessor}{\#define\ luai\_userstateresume(L,n)\ \ \ ((void)L)}}
\DoxyCodeLine{00358\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \textcolor{preprocessor}{\#if\ !defined(luai\_userstateyield)}}
\DoxyCodeLine{00361\ \textcolor{preprocessor}{\#define\ luai\_userstateyield(L,n)\ \ \ \ ((void)L)}}
\DoxyCodeLine{00362\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \textcolor{comment}{/*}}
\DoxyCodeLine{00367\ \textcolor{comment}{**\ The\ luai\_num*\ macros\ define\ the\ primitive\ operations\ over\ numbers.}}
\DoxyCodeLine{00368\ \textcolor{comment}{*/}}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \textcolor{comment}{/*\ floor\ division\ (defined\ as\ 'floor(a/b)')\ */}}
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\#if\ !defined(luai\_numidiv)}}
\DoxyCodeLine{00372\ \textcolor{preprocessor}{\#define\ luai\_numidiv(L,a,b)\ \ \ \ \ ((void)L,\ l\_floor(luai\_numdiv(L,a,b)))}}
\DoxyCodeLine{00373\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \textcolor{comment}{/*\ float\ division\ */}}
\DoxyCodeLine{00376\ \textcolor{preprocessor}{\#if\ !defined(luai\_numdiv)}}
\DoxyCodeLine{00377\ \textcolor{preprocessor}{\#define\ luai\_numdiv(L,a,b)\ \ \ \ \ \ ((a)/(b))}}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \textcolor{comment}{/*}}
\DoxyCodeLine{00381\ \textcolor{comment}{**\ modulo:\ defined\ as\ 'a\ -\/\ floor(a/b)*b';\ the\ direct\ computation}}
\DoxyCodeLine{00382\ \textcolor{comment}{**\ using\ this\ definition\ has\ several\ problems\ with\ rounding\ errors,}}
\DoxyCodeLine{00383\ \textcolor{comment}{**\ so\ it\ is\ better\ to\ use\ 'fmod'.\ 'fmod'\ gives\ the\ result\ of}}
\DoxyCodeLine{00384\ \textcolor{comment}{**\ 'a\ -\/\ trunc(a/b)*b',\ and\ therefore\ must\ be\ corrected\ when}}
\DoxyCodeLine{00385\ \textcolor{comment}{**\ 'trunc(a/b)\ \string~=\ floor(a/b)'.\ That\ happens\ when\ the\ division\ has\ a}}
\DoxyCodeLine{00386\ \textcolor{comment}{**\ non-\/integer\ negative\ result:\ non-\/integer\ result\ is\ equivalent\ to}}
\DoxyCodeLine{00387\ \textcolor{comment}{**\ a\ non-\/zero\ remainder\ 'm';\ negative\ result\ is\ equivalent\ to\ 'a'\ and}}
\DoxyCodeLine{00388\ \textcolor{comment}{**\ 'b'\ with\ different\ signs,\ or\ 'm'\ and\ 'b'\ with\ different\ signs}}
\DoxyCodeLine{00389\ \textcolor{comment}{**\ (as\ the\ result\ 'm'\ of\ 'fmod'\ has\ the\ same\ sign\ of\ 'a').}}
\DoxyCodeLine{00390\ \textcolor{comment}{*/}}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\#if\ !defined(luai\_nummod)}}
\DoxyCodeLine{00392\ \textcolor{preprocessor}{\#define\ luai\_nummod(L,a,b,m)\ \ \(\backslash\)}}
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\ \ \{\ (void)L;\ (m)\ =\ l\_mathop(fmod)(a,b);\ \(\backslash\)}}
\DoxyCodeLine{00394\ \textcolor{preprocessor}{\ \ \ \ if\ (((m)\ >\ 0)\ ?\ (b)\ <\ 0\ :\ ((m)\ <\ 0\ \&\&\ (b)\ >\ 0))\ (m)\ +=\ (b);\ \}}}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \textcolor{comment}{/*\ exponentiation\ */}}
\DoxyCodeLine{00398\ \textcolor{preprocessor}{\#if\ !defined(luai\_numpow)}}
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\#define\ luai\_numpow(L,a,b)\ \ \(\backslash\)}}
\DoxyCodeLine{00400\ \textcolor{preprocessor}{\ \ ((void)L,\ (b\ ==\ 2)\ ?\ (a)*(a)\ :\ l\_mathop(pow)(a,b))}}
\DoxyCodeLine{00401\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \textcolor{comment}{/*\ the\ others\ are\ quite\ standard\ operations\ */}}
\DoxyCodeLine{00404\ \textcolor{preprocessor}{\#if\ !defined(luai\_numadd)}}
\DoxyCodeLine{00405\ \textcolor{preprocessor}{\#define\ luai\_numadd(L,a,b)\ \ \ \ \ \ ((a)+(b))}}
\DoxyCodeLine{00406\ \textcolor{preprocessor}{\#define\ luai\_numsub(L,a,b)\ \ \ \ \ \ ((a)-\/(b))}}
\DoxyCodeLine{00407\ \textcolor{preprocessor}{\#define\ luai\_nummul(L,a,b)\ \ \ \ \ \ ((a)*(b))}}
\DoxyCodeLine{00408\ \textcolor{preprocessor}{\#define\ luai\_numunm(L,a)\ \ \ \ \ \ \ \ (-\/(a))}}
\DoxyCodeLine{00409\ \textcolor{preprocessor}{\#define\ luai\_numeq(a,b)\ \ \ \ \ \ \ \ \ ((a)==(b))}}
\DoxyCodeLine{00410\ \textcolor{preprocessor}{\#define\ luai\_numlt(a,b)\ \ \ \ \ \ \ \ \ ((a)<(b))}}
\DoxyCodeLine{00411\ \textcolor{preprocessor}{\#define\ luai\_numle(a,b)\ \ \ \ \ \ \ \ \ ((a)<=(b))}}
\DoxyCodeLine{00412\ \textcolor{preprocessor}{\#define\ luai\_numgt(a,b)\ \ \ \ \ \ \ \ \ ((a)>(b))}}
\DoxyCodeLine{00413\ \textcolor{preprocessor}{\#define\ luai\_numge(a,b)\ \ \ \ \ \ \ \ \ ((a)>=(b))}}
\DoxyCodeLine{00414\ \textcolor{preprocessor}{\#define\ luai\_numisnan(a)\ \ \ \ \ \ \ \ (!luai\_numeq((a),\ (a)))}}
\DoxyCodeLine{00415\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \textcolor{comment}{/*}}
\DoxyCodeLine{00420\ \textcolor{comment}{**\ lua\_numbertointeger\ converts\ a\ float\ number\ with\ an\ integral\ value}}
\DoxyCodeLine{00421\ \textcolor{comment}{**\ to\ an\ integer,\ or\ returns\ 0\ if\ the\ float\ is\ not\ within\ the\ range\ of}}
\DoxyCodeLine{00422\ \textcolor{comment}{**\ a\ lua\_Integer.\ \ (The\ range\ comparisons\ are\ tricky\ because\ of}}
\DoxyCodeLine{00423\ \textcolor{comment}{**\ rounding.\ The\ tests\ here\ assume\ a\ two-\/complement\ representation,}}
\DoxyCodeLine{00424\ \textcolor{comment}{**\ where\ MININTEGER\ always\ has\ an\ exact\ representation\ as\ a\ float;}}
\DoxyCodeLine{00425\ \textcolor{comment}{**\ MAXINTEGER\ may\ not\ have\ one,\ and\ therefore\ its\ conversion\ to\ float}}
\DoxyCodeLine{00426\ \textcolor{comment}{**\ may\ have\ an\ ill-\/defined\ value.)}}
\DoxyCodeLine{00427\ \textcolor{comment}{*/}}
\DoxyCodeLine{00428\ \textcolor{preprocessor}{\#define\ lua\_numbertointeger(n,p)\ \(\backslash\)}}
\DoxyCodeLine{00429\ \textcolor{preprocessor}{\ \ ((n)\ >=\ (LUA\_NUMBER)(LUA\_MININTEGER)\ \&\&\ \(\backslash\)}}
\DoxyCodeLine{00430\ \textcolor{preprocessor}{\ \ \ (n)\ <\ -\/(LUA\_NUMBER)(LUA\_MININTEGER)\ \&\&\ \(\backslash\)}}
\DoxyCodeLine{00431\ \textcolor{preprocessor}{\ \ \ \ \ \ (*(p)\ =\ (LUA\_INTEGER)(n),\ 1))}}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \textcolor{comment}{/*}}
\DoxyCodeLine{00436\ \textcolor{comment}{**\ LUAI\_FUNC\ is\ a\ mark\ for\ all\ extern\ functions\ that\ are\ not\ to\ be}}
\DoxyCodeLine{00437\ \textcolor{comment}{**\ exported\ to\ outside\ modules.}}
\DoxyCodeLine{00438\ \textcolor{comment}{**\ LUAI\_DDEF\ and\ LUAI\_DDEC\ are\ marks\ for\ all\ extern\ (const)\ variables,}}
\DoxyCodeLine{00439\ \textcolor{comment}{**\ none\ of\ which\ to\ be\ exported\ to\ outside\ modules\ (LUAI\_DDEF\ for}}
\DoxyCodeLine{00440\ \textcolor{comment}{**\ definitions\ and\ LUAI\_DDEC\ for\ declarations).}}
\DoxyCodeLine{00441\ \textcolor{comment}{**\ Elf\ and\ MACH/gcc\ (versions\ 3.2\ and\ later)\ mark\ them\ as\ "{}hidden"{}\ to}}
\DoxyCodeLine{00442\ \textcolor{comment}{**\ optimize\ access\ when\ Lua\ is\ compiled\ as\ a\ shared\ library.\ Not\ all\ elf}}
\DoxyCodeLine{00443\ \textcolor{comment}{**\ targets\ support\ this\ attribute.\ Unfortunately,\ gcc\ does\ not\ offer}}
\DoxyCodeLine{00444\ \textcolor{comment}{**\ a\ way\ to\ check\ whether\ the\ target\ offers\ that\ support,\ and\ those}}
\DoxyCodeLine{00445\ \textcolor{comment}{**\ without\ support\ give\ a\ warning\ about\ it.\ To\ avoid\ these\ warnings,}}
\DoxyCodeLine{00446\ \textcolor{comment}{**\ change\ to\ the\ default\ definition.}}
\DoxyCodeLine{00447\ \textcolor{comment}{*/}}
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\#if\ !defined(LUAI\_FUNC)}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \textcolor{preprocessor}{\#if\ defined(\_\_GNUC\_\_)\ \&\&\ ((\_\_GNUC\_\_*100\ +\ \_\_GNUC\_MINOR\_\_)\ >=\ 302)\ \&\&\ \(\backslash\)}}
\DoxyCodeLine{00451\ \textcolor{preprocessor}{\ \ \ \ (defined(\_\_ELF\_\_)\ ||\ defined(\_\_MACH\_\_))}}
\DoxyCodeLine{00452\ \textcolor{preprocessor}{\#define\ LUAI\_FUNC\ \ \ \_\_attribute\_\_((visibility("{}internal"{})))\ extern}}
\DoxyCodeLine{00453\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00454\ \textcolor{preprocessor}{\#define\ LUAI\_FUNC\ \ \ extern}}
\DoxyCodeLine{00455\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \textcolor{preprocessor}{\#define\ LUAI\_DDEC(dec)\ \ LUAI\_FUNC\ dec}}
\DoxyCodeLine{00458\ \textcolor{preprocessor}{\#define\ LUAI\_DDEF\ \ \ }\textcolor{comment}{/*\ empty\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00463\ \textcolor{comment}{/*\ Give\ these\ macros\ simpler\ names\ for\ internal\ use\ */}}
\DoxyCodeLine{00464\ \textcolor{preprocessor}{\#define\ l\_likely(x)\ luai\_likely(x)}}
\DoxyCodeLine{00465\ \textcolor{preprocessor}{\#define\ l\_unlikely(x)\ \ \ luai\_unlikely(x)}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \textcolor{comment}{/*}}
\DoxyCodeLine{00468\ \textcolor{comment}{**\ \{=======================================================}}
\DoxyCodeLine{00469\ \textcolor{comment}{**\ "{}Abstraction\ Layer"{}\ for\ basic\ report\ of\ messages\ and\ errors}}
\DoxyCodeLine{00470\ \textcolor{comment}{**\ ========================================================}}
\DoxyCodeLine{00471\ \textcolor{comment}{*/}}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \textcolor{comment}{/*\ print\ a\ string\ */}}
\DoxyCodeLine{00474\ \textcolor{preprocessor}{\#if\ !defined(lua\_writestring)}}
\DoxyCodeLine{00475\ \textcolor{preprocessor}{\#define\ lua\_writestring(s,l)\ \ \ fwrite((s),\ sizeof(char),\ (l),\ stdout)}}
\DoxyCodeLine{00476\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \textcolor{comment}{/*\ print\ a\ newline\ and\ flush\ the\ output\ */}}
\DoxyCodeLine{00479\ \textcolor{preprocessor}{\#if\ !defined(HARDSTACKTESTS)}}
\DoxyCodeLine{00480\ \textcolor{preprocessor}{\#define\ condmovestack(L,pre,pos)\ \ \ \ ((void)0)}}
\DoxyCodeLine{00481\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00482\ \textcolor{comment}{/*\ realloc\ stack\ keeping\ its\ size\ */}}
\DoxyCodeLine{00483\ \textcolor{preprocessor}{\#define\ condmovestack(L,pre,pos)\ \ \(\backslash\)}}
\DoxyCodeLine{00484\ \textcolor{preprocessor}{\ \ \{\ int\ sz\_\ =\ stacksize(L);\ pre;\ luaD\_reallocstack((L),\ sz\_,\ 0);\ pos;\ \}}}
\DoxyCodeLine{00485\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00486\ }
\DoxyCodeLine{00487\ \textcolor{comment}{/*\ print\ an\ error\ message\ */}}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00489\ \textcolor{preprocessor}{\#if\ !defined(HARDMEMTESTS)}}
\DoxyCodeLine{00490\ \textcolor{preprocessor}{\#define\ condchangemem(L,pre,pos)\ \ \ \ ((void)0)}}
\DoxyCodeLine{00491\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00492\ \textcolor{preprocessor}{\#define\ condchangemem(L,pre,pos)\ \ \(\backslash\)}}
\DoxyCodeLine{00493\ \textcolor{preprocessor}{\ \ \ \ \{\ if\ (gcrunning(G(L)))\ \{\ pre;\ luaC\_fullgc(L,\ 0);\ pos;\ \}\ \}}}
\DoxyCodeLine{00494\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \textcolor{comment}{/*\ \}=======================================================\ */}}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00498\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00499\ }

\end{DoxyCode}
